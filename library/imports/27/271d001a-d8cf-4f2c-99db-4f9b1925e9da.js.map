{"version":3,"sources":["../../../../../assets/scripts/component/assets/scripts/component/SelectMap.js"],"names":["cc","Class","extends","Component","properties","tpl","default","undefined","type","Node","content","onLoad","configListLen","passData","getPassCount","gameConfig","isEditorMode","i","newItem","instantiate","parent","btn_pass","getChildByName","isTestMode","color","userData","curPassIdx","curMaxPassIdx","itemIdx","label","getComponent","Label","string","contentH","height","start","clickPass","event","target","currentTarget","log","gameCtrl","playPassAD","loadPass","success","error","utils","loadScene","bind"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,aAAI;AACAC,qBAAQC,SADR;AAEAC,kBAAKR,GAAGS;AAFR,SADI;AAKRC,iBAAQ;AACJJ,qBAAQC,SADJ;AAEJC,kBAAKR,GAAGS;AAFJ;AALA,KAHP;;AAcLE,UAdK,oBAcK;AACN,YAAIC,gBAAgBZ,GAAGa,QAAH,CAAYC,YAAZ,EAApB;AACA,YAAGd,GAAGe,UAAH,CAAcC,YAAjB,EAA8B;AAC1BJ;AACH;AACD,aAAI,IAAIK,IAAE,CAAV,EAAYA,IAAEL,aAAd,EAA4BK,GAA5B,EAAgC;AAC5B,gBAAIC,UAAU,KAAKb,GAAnB;AACA,gBAAGY,IAAE,CAAL,EAAO;AACHC,0BAAUlB,GAAGmB,WAAH,CAAe,KAAKd,GAApB,CAAV;AACAa,wBAAQE,MAAR,GAAiB,KAAKf,GAAL,CAASe,MAA1B;AACH;AACD,gBAAIC,WAAWH,QAAQI,cAAR,CAAuB,UAAvB,CAAf;AACA,gBAAGtB,GAAGe,UAAH,CAAcQ,UAAjB,EAA4B;AACxBF,yBAASG,KAAT,GAAiBxB,GAAGwB,KAAH,CAAS,GAAT,EAAa,GAAb,EAAiB,GAAjB,CAAjB;AACH,aAFD,MAEK;AACD,oBAAGxB,GAAGyB,QAAH,CAAYC,UAAZ,IAAwBT,CAA3B,EAA6B;AACzBI,6BAASG,KAAT,GAAiBxB,GAAGwB,KAAH,CAAS,CAAT,EAAW,GAAX,EAAe,CAAf,CAAjB;AACH,iBAFD,MAEM,IAAGxB,GAAGyB,QAAH,CAAYE,aAAZ,IAA2BV,CAA9B,EAAgC;AAClCI,6BAASG,KAAT,GAAiBxB,GAAGwB,KAAH,CAAS,GAAT,EAAa,GAAb,EAAiB,GAAjB,CAAjB;AACH,iBAFK,MAED;AACDH,6BAASG,KAAT,GAAiBxB,GAAGwB,KAAH,CAAS,EAAT,EAAY,EAAZ,EAAe,EAAf,CAAjB;AACH;AACJ;AACDH,qBAASO,OAAT,GAAmBX,CAAnB;AACA,gBAAIY,QAAQR,SAASC,cAAT,CAAwB,OAAxB,EAAiCQ,YAAjC,CAA8C9B,GAAG+B,KAAjD,CAAZ;AACAF,kBAAMG,MAAN,GAAef,CAAf;AACH;;AAED,YAAIgB,WAAWrB,gBAAc,KAAKP,GAAL,CAAS6B,MAAtC;AACA,aAAKxB,OAAL,CAAawB,MAAb,GAAsBD,QAAtB;AACH,KA5CI;AA8CLE,SA9CK,mBA8CI,CAER,CAhDI;;;AAkDL;;AAEAC,aApDK,qBAoDKC,KApDL,EAoDW;AACZ,YAAIC,SAASD,MAAME,aAAnB;AACA,YAAIX,UAAUU,OAAOV,OAArB;;AAEA,YAAG,CAAC5B,GAAGe,UAAH,CAAcQ,UAAlB,EAA6B;AACzB,gBAAGK,UAAQ5B,GAAGyB,QAAH,CAAYE,aAAvB,EAAqC;AACjC3B,mBAAGwC,GAAH,CAAO,qCAAP,EAA6CZ,OAA7C,EAAqD,YAArD,EAAkE5B,GAAGyB,QAAH,CAAYE,aAA9E;AACA;AACH;AACJ;;AAED3B,WAAGyC,QAAH,CAAYC,UAAZ,CAAuB,YAAU;AAC7B1C,eAAGa,QAAH,CAAY8B,QAAZ,CAAqBf,OAArB,EAA6B,UAASgB,OAAT,EAAiB;AAC1C,oBAAG,CAACA,OAAJ,EAAY;AACR5C,uBAAG6C,KAAH,CAAS,0BAAT,EAAoCjB,OAApC;AACA;AACH;AACD5B,mBAAG8C,KAAH,CAASC,SAAT,CAAmB,MAAnB;AACH,aAN4B,CAM3BC,IAN2B,CAMtB,IANsB,CAA7B;AAOH,SARsB,CAQrBA,IARqB,CAQhB,IARgB,CAAvB;AASH;AAxEI,CAAT","file":"SelectMap.js","sourceRoot":"../../../../../assets/scripts/component","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        tpl:{\n            default:undefined,\n            type:cc.Node,\n        },\n        content:{\n            default:undefined,\n            type:cc.Node,\n        }\n    },\n\n    onLoad () {\n        var configListLen = cc.passData.getPassCount();\n        if(cc.gameConfig.isEditorMode){\n            configListLen++;\n        }\n        for(var i=0;i<configListLen;i++){\n            var newItem = this.tpl;\n            if(i>0){\n                newItem = cc.instantiate(this.tpl);\n                newItem.parent = this.tpl.parent;\n            }\n            var btn_pass = newItem.getChildByName(\"btn_pass\");\n            if(cc.gameConfig.isTestMode){\n                btn_pass.color = cc.color(255,255,255);\n            }else{\n                if(cc.userData.curPassIdx==i){\n                    btn_pass.color = cc.color(0,255,0);\n                }else if(cc.userData.curMaxPassIdx>=i){\n                    btn_pass.color = cc.color(255,255,255);\n                }else{\n                    btn_pass.color = cc.color(75,75,75);\n                }\n            }\n            btn_pass.itemIdx = i;\n            var label = btn_pass.getChildByName(\"Label\").getComponent(cc.Label);\n            label.string = i;\n        }\n\n        var contentH = configListLen*this.tpl.height;\n        this.content.height = contentH;\n    },\n\n    start () {\n        \n    },\n\n    // update (dt) {},\n\n    clickPass(event){\n        var target = event.currentTarget;\n        var itemIdx = target.itemIdx;\n\n        if(!cc.gameConfig.isTestMode){\n            if(itemIdx>cc.userData.curMaxPassIdx){\n                cc.log(\"SelectMap:clickPass failure,itemIdx\",itemIdx,\"maxPassIdx\",cc.userData.curMaxPassIdx);\n                return;\n            }\n        }\n\n        cc.gameCtrl.playPassAD(function(){\n            cc.passData.loadPass(itemIdx,function(success){\n                if(!success){\n                    cc.error(\"load pass config failure\",itemIdx);\n                    return;\n                }\n                cc.utils.loadScene(\"game\");\n            }.bind(this));\n        }.bind(this));\n    }\n});\n"]}