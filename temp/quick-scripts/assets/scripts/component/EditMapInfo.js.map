{"version":3,"sources":["EditMapInfo.js"],"names":["cc","Class","extends","Component","properties","rowObj","default","undefined","type","EditBox","colObj","posxObj","posyObj","isDragObj","Toggle","scaleObj","onLoad","onEnable","curPassData","passData","getCurPassData","mapInfo","configData","string","row","col","posx","posy","scale","isChecked","isDrag","start","clear","mapData","initCurPassData","passIdx","savePass","getCurPassIdx","globalEvent","emit","apply","needUpdateMap","newRow","parseInt","newCol","warn","parseFloat"],"mappings":"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","file":"EditMapInfo.js","sourceRoot":"../../../../../assets/scripts/component","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        rowObj:{\n            default:undefined,\n            type:cc.EditBox,\n        },\n        colObj:{\n            default:undefined,\n            type:cc.EditBox,\n        },\n        posxObj:{\n            default:undefined,\n            type:cc.EditBox,\n        },\n        posyObj:{\n            default:undefined,\n            type:cc.EditBox,\n        },\n        isDragObj:{\n            default:undefined,\n            type:cc.Toggle,\n        },\n        scaleObj:{\n            default:undefined,\n            type:cc.EditBox,\n        }\n    },\n\n    onLoad(){\n        \n    },\n\n    onEnable () {\n        this.curPassData = cc.passData.getCurPassData();\n        var mapInfo = this.curPassData.configData.mapInfo;\n        this.rowObj.string = mapInfo.row;\n        this.colObj.string = mapInfo.col;\n        this.posxObj.string = mapInfo.posx;\n        this.posyObj.string = mapInfo.posy;\n        this.scaleObj.string = mapInfo.scale;\n        this.isDragObj.isChecked = mapInfo.isDrag;\n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n\n    clear(){\n        this.curPassData.configData.mapData = {};\n        cc.passData.initCurPassData(this.curPassData.passIdx);\n        cc.passData.savePass(cc.passData.getCurPassIdx());\n        cc.globalEvent.emit(\"Editor:UpdateMap\");\n    },\n\n    apply(){\n        var mapInfo = this.curPassData.configData.mapInfo;\n        var needUpdateMap = false;\n\n        var newRow = parseInt(this.rowObj.string);\n        var newCol = parseInt(this.colObj.string);\n        if(newRow<=0||newCol<=0){\n            cc.warn(\"map row or col must be bigger than 0\");\n            return;\n        }\n        if( newRow != mapInfo.row || \n            newCol != mapInfo.col){\n            this.curPassData.configData.mapData = {};\n            needUpdateMap = true;\n            mapInfo.row = newRow;\n            mapInfo.col = newCol;\n            cc.passData.initCurPassData(this.curPassData.passIdx);\n            cc.warn(\"!!!!!!!!!row col chnage clear map data!!!!!!!!!\");\n        }\n        mapInfo.scale = parseFloat(this.scaleObj.string);\n        mapInfo.posx = parseInt(this.posxObj.string);\n        mapInfo.posy = parseInt(this.posyObj.string);\n        mapInfo.isDrag = this.isDragObj.isChecked;\n        cc.passData.savePass(cc.passData.getCurPassIdx());\n        if(needUpdateMap){\n            cc.globalEvent.emit(\"Editor:UpdateMap\");\n        }else{\n            cc.globalEvent.emit(\"Editor:UpdateMapPos\");\n        }\n    },\n});\n"]}