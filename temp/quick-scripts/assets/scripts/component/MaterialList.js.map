{"version":3,"sources":["MaterialList.js"],"names":["cc","Class","extends","Component","properties","tpl","default","undefined","type","Node","content","onLoad","itemArr","commonConfig","passData","getCommonConfig","matIconList","matIcon","atlas","resMgr","getRes","resName","commonui","i","length","newItem","instantiate","parent","itemIdx","push","frame","getSpriteFrame","sp","getComponent","Sprite","spriteFrame","layout","Layout","contentW","paddingLeft","spacingX","paddingRight","width","updateSelectItem","onSelectItem","event","target","currentTarget","color","Color","editorData","getCurEditorData","curMatieral","globalEvent","emit"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAAQF,GAAGG,SADN;AAELC,gBAAW;AACPC,aAAI;AACAC,qBAAQC,SADR;AAEAC,kBAAKR,GAAGS;AAFR,SADG;AAKPC,iBAAQ;AACJJ,qBAAQC,SADJ;AAEJC,kBAAKR,GAAGS;AAFJ;AALD,KAFN;AAYLE,UAZK,oBAYG;AACJ,aAAKC,OAAL,GAAe,EAAf;AACA,aAAKC,YAAL,GAAoBb,GAAGc,QAAH,CAAYC,eAAZ,EAApB;AACA,YAAIC,cAAc,KAAKH,YAAL,CAAkBI,OAApC;;AAEA,aAAKC,KAAL,GAAalB,GAAGmB,MAAH,CAAUC,MAAV,CAAiBpB,GAAGqB,OAAH,CAAWC,QAA5B,CAAb;AACA,aAAI,IAAIC,IAAI,CAAZ,EAAcA,IAAEP,YAAYQ,MAA5B,EAAmCD,GAAnC,EAAuC;AACnC,gBAAIE,UAAU,KAAKpB,GAAnB;AACA,gBAAGkB,IAAE,CAAL,EAAO;AACHE,0BAAUzB,GAAG0B,WAAH,CAAe,KAAKrB,GAApB,CAAV;AACAoB,wBAAQE,MAAR,GAAiB,KAAKtB,GAAL,CAASsB,MAA1B;AACH;AACDF,oBAAQG,OAAR,GAAkBL,CAAlB;AACA,iBAAKX,OAAL,CAAaiB,IAAb,CAAkBJ,OAAlB;;AAEA,gBAAIK,QAAQ,KAAKZ,KAAL,CAAWa,cAAX,CAA0Bf,YAAYO,CAAZ,CAA1B,CAAZ;AACA,gBAAIS,KAAKP,QAAQQ,YAAR,CAAqBjC,GAAGkC,MAAxB,CAAT;AACAF,eAAGG,WAAH,GAAiBL,KAAjB;AACH;;AAED,YAAIM,SAAS,KAAK1B,OAAL,CAAauB,YAAb,CAA0BjC,GAAGqC,MAA7B,CAAb;AACA,YAAIC,WAAWF,OAAOG,WAAP,GAAqBvB,YAAYQ,MAAZ,GAAmBY,OAAOI,QAA/C,GAA0DJ,OAAOK,YAAjE,GAA8EzB,YAAYQ,MAAZ,GAAmB,KAAKnB,GAAL,CAASqC,KAAzH;AACA,aAAKhC,OAAL,CAAagC,KAAb,GAAqBJ,QAArB;;AAEA,aAAKK,gBAAL,CAAsB,CAAtB;AAEH,KAtCI;AAuCLC,gBAvCK,wBAuCQC,KAvCR,EAuCc;AACf,YAAIC,SAASD,MAAME,aAAnB;AACA,YAAInB,UAAUkB,OAAOlB,OAArB;AACA,aAAKe,gBAAL,CAAsBf,OAAtB;AACH,KA3CI;AA4CLe,oBA5CK,4BA4CYf,OA5CZ,EA4CoB;AACrB,aAAI,IAAIL,IAAE,CAAV,EAAYA,IAAE,KAAKX,OAAL,CAAaY,MAA3B,EAAkCD,GAAlC,EAAsC;AAClC,iBAAKX,OAAL,CAAaW,CAAb,EAAgByB,KAAhB,GAAwB,IAAIhD,GAAGiD,KAAP,CAAa,GAAb,EAAkB,GAAlB,EAAuB,GAAvB,CAAxB;AACH;AACD,aAAKrC,OAAL,CAAagB,OAAb,EAAsBoB,KAAtB,GAA8B,IAAIhD,GAAGiD,KAAP,CAAa,CAAb,EAAgB,GAAhB,EAAqB,CAArB,CAA9B;AACA,YAAIC,aAAalD,GAAGc,QAAH,CAAYqC,gBAAZ,EAAjB;AACAD,mBAAWE,WAAX,GAAyBxB,OAAzB;AACA5B,WAAGqD,WAAH,CAAeC,IAAf,CAAoB,uBAApB;AACH;AApDI,CAAT","file":"MaterialList.js","sourceRoot":"../../../../../assets/scripts/component","sourcesContent":["cc.Class({\n    extends:cc.Component,\n    properties:{\n        tpl:{\n            default:undefined,\n            type:cc.Node,\n        },\n        content:{\n            default:undefined,\n            type:cc.Node,\n        }\n    },\n    onLoad(){\n        this.itemArr = [];\n        this.commonConfig = cc.passData.getCommonConfig();\n        var matIconList = this.commonConfig.matIcon;\n        \n        this.atlas = cc.resMgr.getRes(cc.resName.commonui);\n        for(var i = 0;i<matIconList.length;i++){\n            var newItem = this.tpl;\n            if(i>0){\n                newItem = cc.instantiate(this.tpl);\n                newItem.parent = this.tpl.parent;\n            }\n            newItem.itemIdx = i;\n            this.itemArr.push(newItem);\n\n            var frame = this.atlas.getSpriteFrame(matIconList[i]);\n            var sp = newItem.getComponent(cc.Sprite);\n            sp.spriteFrame = frame;\n        }\n\n        var layout = this.content.getComponent(cc.Layout);\n        var contentW = layout.paddingLeft + matIconList.length*layout.spacingX + layout.paddingRight+matIconList.length*this.tpl.width;\n        this.content.width = contentW;\n\n        this.updateSelectItem(0);\n\n    },\n    onSelectItem(event){\n        var target = event.currentTarget;\n        var itemIdx = target.itemIdx;\n        this.updateSelectItem(itemIdx);\n    },\n    updateSelectItem(itemIdx){\n        for(var i=0;i<this.itemArr.length;i++){\n            this.itemArr[i].color = new cc.Color(255, 255, 255);\n        }\n        this.itemArr[itemIdx].color = new cc.Color(0, 100, 0);\n        var editorData = cc.passData.getCurEditorData();\n        editorData.curMatieral = itemIdx\n        cc.globalEvent.emit(\"Editor:UpdateMaterial\");\n    }\n})"]}