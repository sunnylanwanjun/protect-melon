{"version":3,"sources":["Start.js"],"names":["cc","Class","extends","Component","properties","progress","default","undefined","type","Label","onLoad","constVal","require","resName","ResName","globalEvent","EventTarget","MyTimer","timer","Utils","utils","ResMgr","resMgr","init","ResConfig","CommonRes","ScenePreloadRes","loadCommon","err","log","initGameData","bind","loadedResName","loadedNum","totalNum","string","update","dt","gameConfig","getRes","adConfig","UserData","userData","initGame","PassData","GameDataClass","passData","initConfigList","GameCtrl","gameCtrl","loadScene"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAS;AACLC,qBAAQC,SADH;AAELC,kBAAKR,GAAGS;AAFH;AADD,KAHP;;AAUL;AACAC,YAAQ,kBAAY;;AAEhBV,WAAGW,QAAH,GAAcC,QAAQ,UAAR,CAAd;AACAZ,WAAGa,OAAH,GAAab,GAAGW,QAAH,CAAYG,OAAzB;;AAEAd,WAAGe,WAAH,GAAiB,IAAIf,GAAGgB,WAAP,EAAjB;;AAEA,YAAIC,UAAUL,QAAQ,SAAR,CAAd;AACAZ,WAAGkB,KAAH,GAAW,IAAID,OAAJ,EAAX;;AAEA,YAAIE,QAAQP,QAAQ,OAAR,CAAZ;AACAZ,WAAGoB,KAAH,GAAW,IAAID,KAAJ,EAAX;;AAEA,YAAIE,SAAST,QAAQ,QAAR,CAAb;AACAZ,WAAGsB,MAAH,GAAY,IAAID,MAAJ,EAAZ;AACArB,WAAGsB,MAAH,CAAUC,IAAV,CAAevB,GAAGW,QAAH,CAAYG,OAA3B,EACId,GAAGW,QAAH,CAAYa,SADhB,EAEIxB,GAAGW,QAAH,CAAYc,SAFhB,EAGIzB,GAAGW,QAAH,CAAYe,eAHhB;;AAKA1B,WAAGsB,MAAH,CAAUK,UAAV,CAAqB,UAASC,GAAT,EAAa;AAC9B,gBAAGA,GAAH,EAAO;AACH;AACH;AACD5B,eAAG6B,GAAH,CAAO,sBAAP;AACA,iBAAKC,YAAL;AACH,SANoB,CAMnBC,IANmB,CAMd,IANc,CAArB,EAMa,UAASH,GAAT,EAAaI,aAAb,EAA2BC,SAA3B,EAAqCC,QAArC,EAA8C;AACvD,gBAAGN,GAAH,EAAO;AACH;AACH;AACD5B,eAAG6B,GAAH,CAAO,cAAP,EAAsBG,aAAtB,EAAoCC,SAApC,EAA8CC,QAA9C;AACA,iBAAK7B,QAAL,CAAc8B,MAAd,GAAuB,aAAWF,SAAX,GAAqB,GAArB,GAAyBC,QAAzB,GAAkC,GAAzD;AACH,SANY,CAMXH,IANW,CAMN,IANM,CANb;AAaH,KA5CI;;AA8CL;AACAK,YAAQ,gBAAUC,EAAV,EAAc,CAErB,CAjDI;;AAmDLP,kBAAc,wBAAU;AACpB9B,WAAGsC,UAAH,GAAgBtC,GAAGsB,MAAH,CAAUiB,MAAV,CAAiBvC,GAAGa,OAAH,CAAWyB,UAA5B,CAAhB;AACAtC,WAAGwC,QAAH,GAAcxC,GAAGsB,MAAH,CAAUiB,MAAV,CAAiBvC,GAAGa,OAAH,CAAW2B,QAA5B,CAAd;;AAEA,YAAIC,WAAW7B,QAAQ,UAAR,CAAf;AACAZ,WAAG0C,QAAH,GAAc,IAAID,QAAJ,EAAd;AACAzC,WAAG0C,QAAH,CAAYnB,IAAZ,CAAiB,YAAU;AACvB,iBAAKoB,QAAL;AACH,SAFgB,CAEfZ,IAFe,CAEV,IAFU,CAAjB;AAGH,KA5DI;;AA8DLY,cAAU,oBAAU;AAChB,YAAIC,WAAWhC,QAAQ,UAAR,CAAf;AACA,YAAIiC,gBAAgBjC,QAAQ,WAAR,CAApB;AACAZ,WAAG8C,QAAH,GAAc,IAAIF,QAAJ,EAAd;AACA5C,WAAG8C,QAAH,CAAYvB,IAAZ,CAAiBsB,aAAjB;AACA7C,WAAG8C,QAAH,CAAYC,cAAZ,CAA2B,YAAU;AACjC,gBAAIC,WAAWpC,QAAQ,UAAR,CAAf;AACAZ,eAAGiD,QAAH,GAAc,IAAID,QAAJ,EAAd;AACAhD,eAAGoB,KAAH,CAAS8B,SAAT,CAAmB,MAAnB;AACH,SAJD;AAKH;AAxEI,CAAT","file":"Start.js","sourceRoot":"../../../../../assets/scripts/component","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        progress:{\n            default:undefined,\n            type:cc.Label,\n        }\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        \n        cc.constVal = require(\"ConstVal\");\n        cc.resName = cc.constVal.ResName;\n\n        cc.globalEvent = new cc.EventTarget();\n        \n        var MyTimer = require(\"MyTimer\");\n        cc.timer = new MyTimer();\n\n        var Utils = require(\"Utils\");\n        cc.utils = new Utils();\n\n        var ResMgr = require(\"ResMgr\");\n        cc.resMgr = new ResMgr();\n        cc.resMgr.init(cc.constVal.ResName,\n            cc.constVal.ResConfig,\n            cc.constVal.CommonRes,\n            cc.constVal.ScenePreloadRes);\n\n        cc.resMgr.loadCommon(function(err){\n            if(err){\n                return;\n            }\n            cc.log(\"load common finished\");\n            this.initGameData();\n        }.bind(this),function(err,loadedResName,loadedNum,totalNum){\n            if(err){\n                return;\n            }\n            cc.log(\"loadProgress\",loadedResName,loadedNum,totalNum);\n            this.progress.string = \"loading(\"+loadedNum+\"/\"+totalNum+\")\";\n        }.bind(this));\n    },\n\n    // called every frame\n    update: function (dt) {\n\n    },\n\n    initGameData: function(){\n        cc.gameConfig = cc.resMgr.getRes(cc.resName.gameConfig);\n        cc.adConfig = cc.resMgr.getRes(cc.resName.adConfig);\n\n        var UserData = require(\"UserData\");\n        cc.userData = new UserData();\n        cc.userData.init(function(){\n            this.initGame();\n        }.bind(this));\n    },\n\n    initGame: function(){\n        var PassData = require(\"PassData\");\n        var GameDataClass = require(\"MelonData\");\n        cc.passData = new PassData();\n        cc.passData.init(GameDataClass);\n        cc.passData.initConfigList(function(){\n            var GameCtrl = require(\"GameCtrl\");\n            cc.gameCtrl = new GameCtrl();\n            cc.utils.loadScene(\"main\");\n        });\n    }\n});\n"]}