{"version":3,"sources":["Pool.js"],"names":["cc","Class","ctor","useList","poolList","useIdx","setBuildFunc","buildFunc","_buildFunc","setResetFunc","resetFunc","_resetFunc","get","obj","pop","useFlag","push","args","reset","objKey"],"mappings":";;;;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,QADK,kBACC;AACF,aAAKC,OAAL,GAAe,EAAf;AACA,aAAKC,QAAL,GAAgB,EAAhB;AACA,aAAKC,MAAL,GAAc,CAAd;AACH,KALI;AAMLC,gBANK,wBAMQC,SANR,EAMkB;AACnB,aAAKC,UAAL,GAAkBD,SAAlB;AACH,KARI;AASLE,gBATK,wBASQC,SATR,EASkB;AACnB,aAAKC,UAAL,GAAkBD,SAAlB;AACH,KAXI;AAYLE,OAZK,iBAYO;AACR,YAAIC,MAAM,KAAKT,QAAL,CAAcU,GAAd,EAAV;AACA,YAAG,CAACD,GAAD,IAAM,KAAKL,UAAd,EAAyB;AACrBK,kBAAM,KAAKL,UAAL,uBAAN;AACH;AACD,YAAGK,GAAH,EAAO;AACHA,gBAAIE,OAAJ,GAAc,KAAKV,MAAnB;AACA,iBAAKA,MAAL,GAAc,KAAKA,MAAL,GAAc,CAA5B;AACA,iBAAKF,OAAL,CAAaU,IAAIE,OAAjB,IAA4BF,GAA5B;AACH;AACD,eAAOA,GAAP;AACH,KAvBI;AAwBLG,QAxBK,gBAwBAH,GAxBA,EAwBY;AACb,YAAIE,UAAUF,IAAIE,OAAlB;AACA,eAAO,KAAKZ,OAAL,CAAaY,OAAb,CAAP;AACA,eAAOF,IAAIE,OAAX;AACA,aAAKX,QAAL,CAAcY,IAAd,CAAmBH,GAAnB;AACA,YAAG,KAAKF,UAAR,EAAmB;AAAA,8CALXM,IAKW;AALXA,oBAKW;AAAA;;AACf,iBAAKN,UAAL,cAAgBE,GAAhB,4BAAuBI,IAAvB;AACH;AACJ,KAhCI;AAiCLC,SAjCK,mBAiCS;AAAA,2CAALD,IAAK;AAALA,gBAAK;AAAA;;AACV,aAAI,IAAIE,MAAR,IAAkB,KAAKhB,OAAvB,EAA+B;AAC3B,gBAAIU,MAAM,KAAKV,OAAL,CAAagB,MAAb,CAAV;AACA,gBAAGN,GAAH,EAAO;AACH,qBAAKT,QAAL,CAAcY,IAAd,CAAmBH,GAAnB;AACA,oBAAG,KAAKF,UAAR,EAAmB;AACf,yBAAKA,UAAL,cAAgBE,GAAhB,4BAAuBI,IAAvB;AACH;AACJ;AACJ;AACD,aAAKd,OAAL,GAAe,EAAf;AACH;AA5CI,CAAT","file":"Pool.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["cc.Class({\n    ctor(){\n        this.useList = {};\n        this.poolList = [];\n        this.useIdx = 0;\n    },\n    setBuildFunc(buildFunc){\n        this._buildFunc = buildFunc;\n    },\n    setResetFunc(resetFunc){\n        this._resetFunc = resetFunc;\n    },\n    get(...args){\n        var obj = this.poolList.pop();\n        if(!obj&&this._buildFunc){\n            obj = this._buildFunc(...args);\n        }\n        if(obj){\n            obj.useFlag = this.useIdx;\n            this.useIdx = this.useIdx + 1;\n            this.useList[obj.useFlag] = obj;\n        }\n        return obj;\n    },\n    push(obj,...args){\n        var useFlag = obj.useFlag;\n        delete this.useList[useFlag];\n        delete obj.useFlag;\n        this.poolList.push(obj);\n        if(this._resetFunc){\n            this._resetFunc(obj,...args);\n        }\n    },\n    reset(...args){\n        for(var objKey in this.useList){\n            var obj = this.useList[objKey];\n            if(obj){\n                this.poolList.push(obj);\n                if(this._resetFunc){\n                    this._resetFunc(obj,...args);\n                }\n            }\n        }\n        this.useList = {};\n    }\n})"]}